tasks.register('zipStandard', Zip.class) {
    from 'src/main'
    exclude 'blockbench/**'
    archiveFileName = 'resourcepack.zip'
    destinationDirectory = file('../build/resourcepack/')
}

tasks.register('zipWithRoot', Zip.class) {
    from('src/main') {
        into 'Amigos_Rp'
        exclude 'blockbench/**'
    }
    archiveFileName = 'Amigos_Rp.zip'
    destinationDirectory = file('../build/resourcepack/')
}

tasks.register('build') {
    dependsOn 'zipStandard', 'zipWithRoot'
}

tasks.register('syncDataPack', Copy) {
    from("../build/resourcepack/resourcepack.zip")
    into("run/resourcepacks/")
    dependsOn 'zipStandard'
}

project(':packloader') {
    afterEvaluate {
        tasks.named('runClient') {
            dependsOn(rootProject.tasks.named('syncDataPack'))
        }
    }
}